<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universal Translator - Text, Documents & Images</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <h1>Universal Translator</h1>
                </div>
                <nav class="nav">
                    {% if user %}
                        <span class="user-info">
                            <span class="tier-badge {{ user.tier.value }}">{{ user.tier.value | upper }}</span>
                            {{ user.email }}
                        </span>
                        <a href="/subscription" class="btn btn-secondary">Upgrade</a>
                        <a href="/logout" class="btn btn-outline">Logout</a>
                    {% else %}
                        <a href="/login" class="btn btn-secondary">Login</a>
                        <a href="/register" class="btn btn-primary">Sign Up</a>
                    {% endif %}
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            <!-- Translation Mode Tabs -->
            <div class="tabs">
                <button class="tab-btn active" data-tab="text">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M3 5h14M3 10h14M3 15h14"/>
                    </svg>
                    Text Translation
                </button>
                <button class="tab-btn" data-tab="document">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M6 2h8l4 4v12H6V2z"/>
                    </svg>
                    Document Translation
                </button>
                <button class="tab-btn" data-tab="image">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M3 3h14v14H3V3z M6 10l3 3 5-5"/>
                    </svg>
                    Image Translation
                </button>
            </div>

            <!-- Text Translation Tab -->
            <div class="tab-content active" id="text-tab">
                <div class="translator-container">
                    <!-- Language Selection -->
                    <div class="language-bar">
                        <div class="language-selector">
                            <select id="source-lang" class="lang-select">
                                <option value="auto">Detect Language</option>
                                <option value="en">English</option>
                                <option value="zh-CN">Chinese (Simplified)</option>
                                <option value="zh-TW">Chinese (Traditional)</option>
                                <option value="es">Spanish</option>
                                <option value="fr">French</option>
                                <option value="de">German</option>
                                <option value="ja">Japanese</option>
                                <option value="ko">Korean</option>
                                <option value="ru">Russian</option>
                                <option value="ar">Arabic</option>
                                <option value="pt">Portuguese</option>
                                <option value="it">Italian</option>
                            </select>
                        </div>

                        <button class="swap-btn" id="swap-langs">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M4 6h12M16 6l-3-3M16 6l-3 3M16 14H4M4 14l3 3M4 14l3-3"/>
                            </svg>
                        </button>

                        <div class="language-selector">
                            <select id="target-lang" class="lang-select">
                                <option value="en">English</option>
                                <option value="zh-CN" selected>Chinese (Simplified)</option>
                                <option value="zh-TW">Chinese (Traditional)</option>
                                <option value="es">Spanish</option>
                                <option value="fr">French</option>
                                <option value="de">German</option>
                                <option value="ja">Japanese</option>
                                <option value="ko">Korean</option>
                                <option value="ru">Russian</option>
                                <option value="ar">Arabic</option>
                                <option value="pt">Portuguese</option>
                                <option value="it">Italian</option>
                            </select>
                        </div>
                    </div>

                    <!-- Translation Panels -->
                    <div class="translation-panels">
                        <div class="panel source-panel">
                            <div class="panel-header">
                                <span class="detected-lang" id="detected-lang"></span>
                                <button class="clear-btn" id="clear-source">Clear</button>
                            </div>
                            <textarea
                                id="source-text"
                                class="text-area"
                                placeholder="Enter text to translate..."
                                maxlength="5000"
                            ></textarea>
                            <div class="panel-footer">
                                <span class="char-count" id="char-count">0 / 5000</span>
                            </div>
                        </div>

                        <div class="panel target-panel">
                            <div class="panel-header">
                                <span class="translation-info" id="translation-info"></span>
                                <button class="copy-btn" id="copy-translation">Copy</button>
                            </div>
                            <div id="target-text" class="text-area result" contenteditable="false"></div>
                            <div class="panel-footer">
                                <button class="btn btn-primary" id="translate-btn">Translate</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Document Translation Tab -->
            <div class="tab-content" id="document-tab">
                <div class="upload-container">
                    <div class="upload-header">
                        <h2>Translate Documents</h2>
                        <p>Supported formats: PDF, Word (.docx), Excel (.xlsx), PowerPoint (.pptx)</p>
                    </div>

                    <div class="language-bar">
                        <select id="doc-source-lang" class="lang-select">
                            <option value="auto">Detect Language</option>
                            <option value="en">English</option>
                            <option value="zh-CN">Chinese (Simplified)</option>
                            <option value="es">Spanish</option>
                            <option value="fr">French</option>
                            <option value="de">German</option>
                        </select>

                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" style="margin: 0 20px;">
                            <path d="M5 10h10M10 5l5 5-5 5"/>
                        </svg>

                        <select id="doc-target-lang" class="lang-select">
                            <option value="zh-CN" selected>Chinese (Simplified)</option>
                            <option value="en">English</option>
                            <option value="es">Spanish</option>
                            <option value="fr">French</option>
                            <option value="de">German</option>
                        </select>
                    </div>

                    <div class="upload-area" id="doc-upload-area">
                        <svg width="64" height="64" viewBox="0 0 64 64" fill="none" stroke="currentColor">
                            <rect x="12" y="8" width="40" height="48" rx="2" stroke-width="2"/>
                            <line x1="20" y1="20" x2="44" y2="20" stroke-width="2"/>
                            <line x1="20" y1="28" x2="44" y2="28" stroke-width="2"/>
                            <line x1="20" y1="36" x2="36" y2="36" stroke-width="2"/>
                        </svg>
                        <h3>Drop document here or click to browse</h3>
                        <p>Max file size: <span id="max-doc-size">50MB</span></p>
                        <input type="file" id="doc-file-input" accept=".pdf,.docx,.xlsx,.pptx" hidden>
                    </div>

                    <div class="file-info" id="doc-file-info" style="display: none;">
                        <div class="file-details">
                            <svg width="32" height="32" viewBox="0 0 32 32" fill="currentColor">
                                <path d="M8 4h12l4 4v16H8V4z"/>
                            </svg>
                            <div>
                                <div class="file-name" id="doc-file-name"></div>
                                <div class="file-size" id="doc-file-size"></div>
                            </div>
                        </div>
                        <button class="btn btn-primary" id="translate-doc-btn">Translate Document</button>
                    </div>

                    <div class="progress-container" id="doc-progress" style="display: none;">
                        <div class="progress-bar">
                            <div class="progress-fill" id="doc-progress-fill"></div>
                        </div>
                        <p class="progress-text" id="doc-progress-text">Translating...</p>
                    </div>

                    <div class="result-container" id="doc-result" style="display: none;">
                        <div class="result-success">
                            <svg width="48" height="48" viewBox="0 0 48 48" fill="none" stroke="currentColor">
                                <circle cx="24" cy="24" r="20" stroke-width="3"/>
                                <path d="M14 24l8 8 12-12" stroke-width="3"/>
                            </svg>
                            <h3>Translation Complete!</h3>
                            <button class="btn btn-primary" id="download-doc-btn">Download Translated Document</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Image Translation Tab -->
            <div class="tab-content" id="image-tab">
                <div class="upload-container">
                    <div class="upload-header">
                        <h2>Translate Images</h2>
                        <p>Translate text within images using OCR</p>
                    </div>

                    <div class="language-bar">
                        <select id="img-source-lang" class="lang-select">
                            <option value="auto">Detect Language</option>
                            <option value="en">English</option>
                            <option value="zh-CN">Chinese (Simplified)</option>
                            <option value="ja">Japanese</option>
                            <option value="ko">Korean</option>
                        </select>

                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" style="margin: 0 20px;">
                            <path d="M5 10h10M10 5l5 5-5 5"/>
                        </svg>

                        <select id="img-target-lang" class="lang-select">
                            <option value="zh-CN" selected>Chinese (Simplified)</option>
                            <option value="en">English</option>
                            <option value="ja">Japanese</option>
                            <option value="ko">Korean</option>
                        </select>
                    </div>

                    <div class="upload-area" id="img-upload-area">
                        <svg width="64" height="64" viewBox="0 0 64 64" fill="none" stroke="currentColor">
                            <rect x="8" y="8" width="48" height="48" rx="2" stroke-width="2"/>
                            <circle cx="20" cy="20" r="4" stroke-width="2"/>
                            <path d="M8 48l12-12 8 8 16-16 12 12" stroke-width="2"/>
                        </svg>
                        <h3>Drop image here or click to browse</h3>
                        <p>Supported formats: PNG, JPG, JPEG, GIF, BMP, WEBP</p>
                        <input type="file" id="img-file-input" accept="image/*" hidden>
                    </div>

                    <div class="file-info" id="img-file-info" style="display: none;">
                        <div class="image-preview" id="img-preview"></div>
                        <button class="btn btn-primary" id="translate-img-btn">Translate Image</button>
                    </div>

                    <div class="progress-container" id="img-progress" style="display: none;">
                        <div class="progress-bar">
                            <div class="progress-fill" id="img-progress-fill"></div>
                        </div>
                        <p class="progress-text" id="img-progress-text">Processing image...</p>
                    </div>

                    <div class="result-container" id="img-result" style="display: none;">
                        <div class="image-comparison">
                            <div class="comparison-image">
                                <h4>Original</h4>
                                <img id="img-original" src="" alt="Original">
                            </div>
                            <div class="comparison-image">
                                <h4>Translated</h4>
                                <img id="img-translated" src="" alt="Translated">
                            </div>
                        </div>
                        <button class="btn btn-primary" id="download-img-btn">Download Translated Image</button>
                    </div>
                </div>
            </div>

            <!-- Subscription Info Banner -->
            {% if not user or user.tier.value == 'free' %}
            <div class="subscription-banner">
                <div class="banner-content">
                    <h3>Upgrade for Better Translations</h3>
                    <div class="tier-comparison">
                        <div class="tier-card">
                            <h4>Free</h4>
                            <p class="tier-price">$0/month</p>
                            <ul>
                                <li>Google Translate</li>
                                <li>500K characters/month</li>
                                <li>3 documents/month</li>
                                <li>10 images/month</li>
                            </ul>
                            <button class="btn btn-outline" disabled>Current Plan</button>
                        </div>
                        <div class="tier-card featured">
                            <div class="tier-badge-top">POPULAR</div>
                            <h4>DeepL Pro</h4>
                            <p class="tier-price">$9.99/month</p>
                            <ul>
                                <li>DeepL API</li>
                                <li>5M characters/month</li>
                                <li>50 documents/month</li>
                                <li>100 images/month</li>
                            </ul>
                            <a href="/subscription" class="btn btn-primary">Upgrade Now</a>
                        </div>
                        <div class="tier-card">
                            <h4>AI Premium</h4>
                            <p class="tier-price">$29.99/month</p>
                            <ul>
                                <li>AI-Powered (GPT/Claude)</li>
                                <li>Unlimited translations</li>
                                <li>Best quality</li>
                                <li>Priority support</li>
                            </ul>
                            <a href="/subscription" class="btn btn-primary">Upgrade Now</a>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Universal Translator. All rights reserved.</p>
            <div class="footer-links">
                <a href="/terms">Terms of Service</a>
                <a href="/privacy">Privacy Policy</a>
                <a href="/contact">Contact</a>
            </div>
        </div>
    </footer>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
